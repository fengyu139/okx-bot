# 策略对比 - OKX 交易机器人

本项目包含两种不同的交易策略，适用于不同的市场环境和交易风格。

## 策略总览

| 特性     | SMA 均线策略    | 高低点突破策略     |
| -------- | --------------- | ------------------ |
| 文件名   | `okxNewBot.js`  | `okxHighLowBot.js` |
| 策略类型 | 趋势跟踪        | 突破交易           |
| 技术指标 | 移动平均线交叉  | 价格高低点         |
| 适合市场 | 明确趋势市场    | 震荡后突破         |
| 检测频率 | 15 秒（可配置） | 10 分钟（可配置）  |
| 交易频率 | 较高            | 较低               |
| 风险等级 | 中等            | 中高               |

---

## 策略 1：SMA 均线交叉策略

### 核心逻辑

使用短期和长期移动平均线的交叉来判断趋势：

- **金叉**（短期均线上穿长期均线）→ 做多
- **死叉**（短期均线下穿长期均线）→ 做空

### 技术指标

```
短期均线：7 周期（默认）
长期均线：25 周期（默认）
时间框架：1分钟、15分钟、1小时（多时间框架确认）
```

### 优势

✅ 适合趋势明确的市场
✅ 有多重过滤机制（波动率、ATR、成交量）
✅ 动态止损止盈
✅ 多时间框架确认
✅ 检测频率高，反应快

### 劣势

❌ 震荡市场容易被套
❌ 假突破导致频繁交易
❌ 滞后性（需要等待均线形成）
❌ 交易频率高，手续费成本高

### 适用场景

- 明确的上升或下降趋势
- 市场波动率适中
- 有足够的成交量支持

### 配置文件

```bash
启动脚本: ./startMulti.sh
PM2配置: ecosystem.config.js
文档: README_NewBot.md, QUICKSTART_MULTI.md
```

---

## 策略 2：高低点突破策略

### 核心逻辑

基于价格在特定时间窗口内的极值进行交易：

- **触及高点**（12 小时最高价）→ 做多
- **触及低点**（12 小时最低价）→ 做空

### 技术指标

```
回溯周期：12 小时（默认）
时间框架：5 分钟 K 线
突破确认：价格触及 99.9% 高点或 100.1% 低点
```

### 优势

✅ 逻辑简单清晰
✅ 适合捕捉突破行情
✅ 交易频率低，手续费少
✅ 不依赖复杂指标
✅ 适合震荡后的突破

### 劣势

❌ 可能错过趋势中段
❌ 假突破风险
❌ 检测频率低，可能延迟
❌ 需要耐心等待信号

### 适用场景

- 盘整后的突破
- 价格在区间震荡
- 关键支撑/阻力位
- 重要技术位突破

### 配置文件

```bash
启动脚本: ./startHighLow.sh
PM2配置: ecosystem.highlow.config.js
文档: README_HighLowBot.md, QUICKSTART_HIGHLOW.md
```

---

## 详细对比

### 1. 交易信号生成

#### SMA 均线策略

```
1. 计算短期/长期均线
2. 检测均线交叉
3. 多时间框架确认
4. 波动率过滤
5. ATR 检查
6. 成交量确认
7. 交易间隔检查
→ 生成交易信号
```

#### 高低点突破策略

```
1. 获取 12 小时 K 线数据
2. 计算最高价/最低价
3. 比较当前价格
4. 判断是否触及极值
→ 生成交易信号
```

### 2. 风险管理

#### SMA 均线策略

- 止损：动态计算（基于 ATR）
- 止盈：止损的 2 倍
- 风险：每次交易风险 1.5%
- 仓位：根据止损计算

#### 高低点突破策略

- 止损：固定 3%
- 止盈：固定 5%
- 风险：账户余额的 50%
- 仓位：直接计算合约数

### 3. 参数配置

#### SMA 均线策略参数

```bash
# 均线参数
SHORT_SMA_PERIOD=7              # 短期均线
LONG_SMA_PERIOD=25              # 长期均线

# 风险管理
RISK_PER_TRADE=0.015            # 每次风险 1.5%
LEVERAGE=10                     # 杠杆倍数

# 过滤器
MIN_VOLATILITY=0.0005           # 最小波动率 0.05%
MIN_ATR_RATIO=0.002             # 最小 ATR 比率 0.2%
MIN_PRICE_CHANGE=0.003          # 最小价格变化 0.3%
MIN_VOLUME_RATIO=1.3            # 成交量倍数 1.3x
MIN_TRADE_INTERVAL=1800000      # 最小交易间隔 30分钟

# 检测频率
POLL_INTERVAL_MS=15000          # 15秒
```

#### 高低点突破策略参数

```bash
# 策略参数
LEVERAGE=10                     # 杠杆倍数
LOOKBACK_HOURS=12               # 回溯周期 12小时
POSITION_SIZE_PCT=0.5           # 仓位 50%

# 止损止盈
TAKE_PROFIT_PCT=0.05            # 止盈 5%
STOP_LOSS_PCT=0.03              # 止损 3%

# 检测频率
POLL_INTERVAL_MS=600000         # 10分钟
```

### 4. 性能指标（理论）

| 指标         | SMA 均线策略       | 高低点突破策略    |
| ------------ | ------------------ | ----------------- |
| 胜率         | 45-55%             | 40-50%            |
| 盈亏比       | 2:1                | 1.67:1            |
| 交易频率     | 高（每天 5-20 次） | 低（每天 0-3 次） |
| 适合持仓时间 | 30 分钟-4 小时     | 2-12 小时         |
| 最大回撤     | 中等               | 中高              |

---

## 如何选择策略

### 选择 SMA 均线策略，如果：

✅ 市场有明确趋势
✅ 你希望频繁交易
✅ 你有时间监控
✅ 你了解技术分析
✅ 你喜欢多重确认

**推荐币种：**

- BTC（波动稳定）
- ETH（流动性好）
- 主流大盘币

### 选择高低点突破策略，如果：

✅ 市场在区间震荡
✅ 你希望减少交易频率
✅ 你喜欢简单策略
✅ 你关注关键价位
✅ 你有耐心等待

**推荐币种：**

- BTC（突破效果好）
- 主流币种
- 有明确支撑/阻力的币种

---

## 组合使用建议

### 方案 1：分散币种

```
BTC + ETH → SMA 均线策略（趋势币种）
SOL + DOGE → 高低点突破策略（突破币种）
```

### 方案 2：分散时间

```
日间（波动大） → SMA 均线策略
夜间（震荡为主） → 高低点突破策略
```

### 方案 3：分散资金

```
60% 资金 → SMA 均线策略（稳健）
40% 资金 → 高低点突破策略（激进）
```

---

## 回测建议

在实盘使用前，建议：

### 1. 模拟盘测试

```bash
# 修改 .env
OKX_BASE_URL=https://www.okx.com  # 使用模拟环境

# 运行 1-2 周
```

### 2. 小额实盘

```bash
# 起始资金: 100-500 USDT
# 运行时间: 1 周
# 观察指标:
#   - 胜率
#   - 盈亏比
#   - 最大回撤
#   - 交易频率
```

### 3. 逐步加仓

```
第1周: 100 USDT
第2周: 300 USDT（如果表现好）
第3周: 500 USDT
第4周: 1000 USDT
...
```

---

## 两种策略同时运行

### 资源需求

```bash
# CPU: 基本可忽略
# 内存: 每个实例约 50-100MB
# 网络: API 调用频率

SMA 策略: 每15秒一次
高低点策略: 每10分钟一次
```

### 同时运行示例

```bash
# 启动 SMA 均线策略（BTC, ETH）
pm2 start ecosystem.config.js

# 启动高低点策略（SOL, DOGE）
pm2 start ecosystem.highlow.config.js

# 查看所有实例
pm2 status
```

---

## 风险警示

⚠️ **两种策略都有风险**

1. **市场风险**

   - 剧烈波动可能导致快速止损
   - 流动性不足可能滑点严重

2. **策略风险**

   - 过度拟合历史数据
   - 市场环境变化
   - 黑天鹅事件

3. **技术风险**

   - API 故障
   - 网络延迟
   - 程序 bug

4. **资金管理**
   - 不要过度杠杆
   - 不要满仓操作
   - 设置总体止损线

---

## 总结

| 如果你想... | 推荐策略       |
| ----------- | -------------- |
| 捕捉趋势    | SMA 均线策略   |
| 捕捉突破    | 高低点突破策略 |
| 频繁交易    | SMA 均线策略   |
| 减少交易    | 高低点突破策略 |
| 复杂系统    | SMA 均线策略   |
| 简单逻辑    | 高低点突破策略 |
| 主动监控    | SMA 均线策略   |
| 被动等待    | 高低点突破策略 |

**最佳实践：**

- 不要同时在同一币种上运行两个策略
- 分散投资，降低风险
- 定期回顾和优化
- 保持理性，控制情绪

祝交易顺利！📈
